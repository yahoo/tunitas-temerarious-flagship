#!/bin/sh
source ${0%/*}/rigging.sh || exit 70
# --dryrun on usage has no effect (as usage has no effect)
expected_ecode=0
# (for now) unwind the trap ... we expect this test to fail
trap '' ERR
(
    ${exe?} --dryrun --usage
) >& ${output?}
actual_ecode=$?
trap failing ERR
if ((expected_ecode != actual_ecode)); then
    echo "exit expected=${expected_ecode} actual=${actual_ecode}"
    failing
else
    difference ${golden?} ${output?}
    successful
fi
